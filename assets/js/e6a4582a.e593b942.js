"use strict";(self.webpackChunkcompositor_live=self.webpackChunkcompositor_live||[]).push([[7265],{5210:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>y,contentTitle:()=>h,default:()=>x,frontMatter:()=>p,metadata:()=>m,toc:()=>f});var s=t(5893),i=t(1151),r=t(4866),o=t(5162);const a="data:image/webp;base64,UklGRpwGAABXRUJQVlA4IJAGAADwxACdASoABdACPu12tlMko6KhIAgAlh2J6W7hd2EbQAnsA99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvrAAA/v+dGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=",c=t.p+"assets/images/simple_scene_2-c5dfc4a7bc5c3c8cf38700ab270c2321.webp",l=t.p+"assets/images/simple_scene_3-cd23fc29a3c6ba9fc0afb5400925926c.webp",d=t.p+"assets/images/simple_scene_4-52e18a12081cc90cdac41e805195ef07.webp",u=t.p+"assets/images/simple_scene_5-b417f13c80a11598f443eafcc7518041.webp",p={},h="Simple scene",m={id:"guides/simple-scene",title:"Simple scene",description:"This guide will explain how to create simple scene that is combining input streams in a simple layout into single output stream.",source:"@site/pages/guides/simple-scene.md",sourceDirName:"guides",slug:"/guides/simple-scene",permalink:"/docs/guides/simple-scene",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Guides",permalink:"/docs/category/guides"},next:{title:"How to deliver input streams",permalink:"/docs/guides/deliver-input"}},y={},f=[{value:"Configure inputs and output",id:"configure-inputs-and-output",level:2},{value:"Start the compositor",id:"start-the-compositor",level:3},{value:"Register input stream <code>input_1</code>.",id:"register-input-stream-input_1",level:3},{value:"Register input stream <code>input_2</code>.",id:"register-input-stream-input_2",level:3},{value:"Register output stream <code>output_1</code>.",id:"register-output-stream-output_1",level:3},{value:"Update scene to show an input",id:"update-scene-to-show-an-input",level:2},{value:"Resize input stream to fit inside the output",id:"resize-input-stream-to-fit-inside-the-output",level:2},{value:"Show both inputs side by side",id:"show-both-inputs-side-by-side",level:2},{value:"Place one of the inputs in the top right corner",id:"place-one-of-the-inputs-in-the-top-right-corner",level:2}];function b(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"simple-scene",children:"Simple scene"}),"\n",(0,s.jsx)(n.p,{children:"This guide will explain how to create simple scene that is combining input streams in a simple layout into single output stream."}),"\n",(0,s.jsx)(n.h2,{id:"configure-inputs-and-output",children:"Configure inputs and output"}),"\n",(0,s.jsx)(n.h3,{id:"start-the-compositor",children:"Start the compositor"}),"\n",(0,s.jsxs)(r.Z,{queryString:"lang",children:[(0,s.jsx)(o.Z,{value:"http",label:"HTTP",children:(0,s.jsxs)(n.p,{children:["Start the compositor server. Check out ",(0,s.jsx)(n.a,{href:"/docs/deployment/configuration",children:"configuration page"})," for available configuration options."]})}),(0,s.jsxs)(o.Z,{value:"membrane",label:"Membrane Framework",children:[(0,s.jsxs)(n.p,{children:["Following code snippets are implementing ",(0,s.jsx)(n.code,{children:"handle_init/2"})," or ",(0,s.jsx)(n.code,{children:"handle_setup/2"})," callbacks. Those\nare just examples, you can use any ",(0,s.jsxs)(n.a,{href:"https://hexdocs.pm/membrane_core/Membrane.Pipeline.html#callbacks",children:[(0,s.jsx)(n.code,{children:"Membrane.Pipeline"})," callbacks"]}),"\ninstead."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-elixir",children:"alias Membrane.LiveCompositor\n\ndef handle_init(ctx, opts) do\n  spec = [\n    ...\n\n    child(:live_compositor, %LiveCompositor{\n      framerate: {30, 1},\n      server_setup: :start_locally,\n    }),\n\n    ...\n  ]\n  {[spec: spec], %{}}\nend\n"})})]})]}),"\n",(0,s.jsxs)(n.h3,{id:"register-input-stream-input_1",children:["Register input stream ",(0,s.jsx)(n.code,{children:"input_1"}),"."]}),"\n",(0,s.jsxs)(r.Z,{queryString:"lang",children:[(0,s.jsxs)(o.Z,{value:"http",label:"HTTP",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST: /api/input/input_1/register\nContent-Type: application/json\n\n{\n  "type": "rtp_stream",\n  "transport_protocol": "tcp_server",\n  "port": 9001,\n  "video": {\n    "decoder": "ffmpeg_h264"\n  }\n}\n'})}),(0,s.jsxs)(n.p,{children:["After receiving the response you can establish the connection and start sending the stream. Check out ",(0,s.jsx)(n.a,{href:"/docs/guides/deliver-input",children:"how to deliver input streams"})," to learn more."]}),(0,s.jsx)(n.p,{children:"In this example we are using RTP over TCP, but it could be easily replaced by UDP."})]}),(0,s.jsxs)(o.Z,{value:"membrane",label:"Membrane Framework",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-elixir",children:'def handle_init(ctx, opts) do\n  spec = [\n    ...\n\n    input_1_spec\n    |> via_in(Pad.ref(:video_input, "input_1"))\n    |> get_child(:live_compositor),\n\n    ...\n  ]\n  {[spec: spec], %{}}\nend\n'})}),(0,s.jsxs)(n.p,{children:["where ",(0,s.jsx)(n.code,{children:"input_1_spec"})," is an element that produces H264 video."]})]})]}),"\n",(0,s.jsxs)(n.h3,{id:"register-input-stream-input_2",children:["Register input stream ",(0,s.jsx)(n.code,{children:"input_2"}),"."]}),"\n",(0,s.jsxs)(r.Z,{queryString:"lang",children:[(0,s.jsxs)(o.Z,{value:"http",label:"HTTP",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST: /api/input/input_2/register\nContent-Type: application/json\n\n{\n  "type": "rtp_stream",\n  "transport_protocol": "tcp_server",\n  "port": 9002,\n  "video": {\n    "decoder": "ffmpeg_h264"\n  }\n}\n'})}),(0,s.jsxs)(n.p,{children:["After receiving the response you can establish the connection and start sending the stream. Check out ",(0,s.jsx)(n.a,{href:"/docs/guides/deliver-input",children:"how to deliver input streams"})," to learn more."]}),(0,s.jsx)(n.p,{children:"In this example we are using RTP over TCP, but it could be easily replaced by UDP."})]}),(0,s.jsxs)(o.Z,{value:"membrane",label:"Membrane Framework",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-elixir",children:'def handle_init(ctx, opts) do\n  spec = [\n    ...\n\n    input_2_spec\n    |> via_in(Pad.ref(:video_input, "input_2"))\n    |> get_child(:live_compositor),\n\n    ...\n  ]\n  {[spec: spec], %{}}\nend\n'})}),(0,s.jsxs)(n.p,{children:["where ",(0,s.jsx)(n.code,{children:"input_2_spec"})," is an element that produces H264 video."]})]})]}),"\n",(0,s.jsxs)(n.h3,{id:"register-output-stream-output_1",children:["Register output stream ",(0,s.jsx)(n.code,{children:"output_1"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Configure it to render just an empty ",(0,s.jsx)(n.a,{href:"/docs/api/components/View",children:(0,s.jsx)(n.code,{children:"View"})})," component with a background color set to ",(0,s.jsx)(n.code,{children:"#4d4d4d"})," (gray)."]}),"\n",(0,s.jsxs)(r.Z,{queryString:"lang",children:[(0,s.jsxs)(o.Z,{value:"http",label:"HTTP",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST: /api/output/output_1/register\nContent-Type: application/json\n\n{\n  "type": "rtp_stream",\n  "transport_protocol": "tcp_server",\n  "port": 9003,\n  "video": {\n    "resolution": { "width": 1280, "height": 720 },\n    "encoder": {\n      "type": "ffmpeg_h264",\n      "preset": "ultrafast",\n      "initial": {\n        "root": {\n          "type": "view",\n          "background_color_rgba": "#4d4d4dff",\n        }\n      }\n    }\n  }\n}\n'})}),(0,s.jsxs)(n.p,{children:["After receiving the response you can establish the connection and start listening for the stream. Check out ",(0,s.jsx)(n.a,{href:"/docs/guides/receive-output",children:"how to receive output streams"})," to learn more."]}),(0,s.jsx)(n.p,{children:"In this example we are using RTP over TCP, if you prefer to use UDP you need start listening on the specified port before sending register request to make sure you are not losing\nfirst frames."})]}),(0,s.jsxs)(o.Z,{value:"membrane",label:"Membrane Framework",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-elixir",children:'def handle_init(ctx, opts) do\n  spec = [\n    ...\n\n    get_child(:live_compositor),\n    |> via_out(Pad.ref(:video_output, "output_1"), options: [\n      width: 1280,\n      height: 720,\n      encoder: %LiveCompositor.Encoder.FFmpegH264{\n        preset: :ultrafast\n      },\n      initial: %{\n        root: %{\n          type: :view,\n          background_color_rgba: "#4d4d4dff",\n        },\n      },\n    ])\n    |> output_1_spec\n\n    ...\n  ]\n  {[spec: spec], %{}}\nend\n'})}),(0,s.jsxs)(n.p,{children:["where ",(0,s.jsx)(n.code,{children:"output_1_spec"})," is an element that can consume H264 video."]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"View"})," component does not have any children, so on the output you should see just a blank screen of a specified color as shown below."]}),"\n",(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("img",{src:a,style:{width:600}}),(0,s.jsx)(n.p,{children:"Output stream"})]}),"\n",(0,s.jsx)(n.h2,{id:"update-scene-to-show-an-input",children:"Update scene to show an input"}),"\n",(0,s.jsxs)(n.p,{children:["Update output to render a ",(0,s.jsx)(n.a,{href:"/docs/api/components/View",children:(0,s.jsx)(n.code,{children:"View"})})," component with an ",(0,s.jsx)(n.a,{href:"/docs/api/components/InputStream",children:(0,s.jsx)(n.code,{children:"InputStream"})})," as its child."]}),"\n",(0,s.jsxs)(r.Z,{queryString:"lang",children:[(0,s.jsx)(o.Z,{value:"http",label:"HTTP",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST: /api/output/output_1/update\nContent-Type: application/json\n\n{\n  "video": {\n    "root": {\n      "type": "view",\n      "background_color_rgba": "#4d4d4dff",\n      "children": [\n        { "type": "input_stream", "input_id": "input_1" },\n      ]\n    }\n  }\n}\n'})})}),(0,s.jsx)(o.Z,{value:"membrane",label:"Membrane Framework",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-elixir",children:'def handle_setup(ctx, state) do\n  request = %LiveCompositor.Request.UpdateVideoOutput{\n    output_id: "output_1",\n    root: %{\n      type: :view,\n      background_color_rgba: "#4d4d4dff",\n      children: [\n        %{ type: :input_stream, input_id: :input_1 }\n      ]\n    }\n  }\n  {[notify_child: {:live_compositor, request}], state}\nend\n'})})})]}),"\n",(0,s.jsxs)(n.p,{children:["The input stream in the example has a resolution ",(0,s.jsx)(n.code,{children:"1920x1080"})," and it is rendered on the ",(0,s.jsx)(n.code,{children:"1270x720"})," output. As a result only part of the stream is visible."]}),"\n",(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("img",{src:c,style:{width:600}}),(0,s.jsx)(n.p,{children:"Output stream"})]}),"\n",(0,s.jsx)(n.h2,{id:"resize-input-stream-to-fit-inside-the-output",children:"Resize input stream to fit inside the output"}),"\n",(0,s.jsxs)(n.p,{children:["Wrap an ",(0,s.jsx)(n.a,{href:"/docs/api/components/InputStream",children:(0,s.jsx)(n.code,{children:"InputStream"})})," component with a ",(0,s.jsx)(n.a,{href:"/docs/api/components/Rescaler",children:(0,s.jsx)(n.code,{children:"Rescaler"})}),"."]}),"\n",(0,s.jsxs)(r.Z,{queryString:"lang",children:[(0,s.jsx)(o.Z,{value:"http",label:"HTTP",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST: /api/output/output_1/update\nContent-Type: application/json\n\n{\n  "video": {\n    "root": {\n      "type": "view",\n      "background_color_rgba": "#4d4d4dff",\n      "children": [\n        {\n          "type": "rescaler",\n          "child": { "type": "input_stream", "input_id": "input_1" },\n        }\n      ]\n    }\n  }\n}\n'})})}),(0,s.jsx)(o.Z,{value:"membrane",label:"Membrane Framework",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-elixir",children:'def handle_setup(ctx, state) do\n  request = %LiveCompositor.Request.UpdateVideoOutput{\n    output_id: "output_1",\n    root: %{\n      type: :view,\n      background_color_rgba: "#4d4d4dff",\n      children: [\n        %{\n          type: :rescaler,\n          child: %{ type: :input_stream, input_id: :input_1 },\n        }\n      ]\n    }\n  }\n  {[notify_child: {:live_compositor, request}], state}\nend\n'})})})]}),"\n",(0,s.jsx)(n.p,{children:"Input stream now fully fits inside the output."}),"\n",(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("img",{src:l,style:{width:600}}),(0,s.jsx)(n.p,{children:"Output stream"})]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.p,{children:"The same effect (for single input) could be achieved by either:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Setting ",(0,s.jsx)(n.code,{children:"InputStream"})," as a root directly. It would only work if aspect ratio of input and output is the same."]}),"\n",(0,s.jsxs)(n.li,{children:["Replacing ",(0,s.jsx)(n.code,{children:"View"})," component with a ",(0,s.jsx)(n.code,{children:"Rescaler"}),"."]}),"\n"]})]}),"\n",(0,s.jsx)(n.h2,{id:"show-both-inputs-side-by-side",children:"Show both inputs side by side"}),"\n",(0,s.jsxs)(n.p,{children:["Add another ",(0,s.jsx)(n.a,{href:"/docs/api/components/InputStream",children:(0,s.jsx)(n.code,{children:"InputStream"})})," wrapped with ",(0,s.jsx)(n.a,{href:"/docs/api/components/Rescaler",children:(0,s.jsx)(n.code,{children:"Rescaler"})}),"."]}),"\n",(0,s.jsxs)(r.Z,{queryString:"lang",children:[(0,s.jsx)(o.Z,{value:"http",label:"HTTP",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST: /api/output/output_1/update\nContent-Type: application/json\n\n{\n  "video": {\n    "root": {\n      "type": "view",\n      "background_color_rgba": "#4d4d4dff",\n      "children": [\n        {\n          "type": "rescaler",\n          "child": { "type": "input_stream", "input_id": "input_1" },\n        },\n        {\n          "type": "rescaler",\n          "child": { "type": "input_stream", "input_id": "input_2" },\n        }\n      ]\n    }\n  }\n}\n'})})}),(0,s.jsx)(o.Z,{value:"membrane",label:"Membrane Framework",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-elixir",children:'def handle_setup(ctx, state) do\n  request = %LiveCompositor.Request.UpdateVideoOutput{\n    output_id: "output_1",\n    root: %{\n      type: :view,\n      background_color_rgba: "#4d4d4dff",\n      children: [\n        %{\n          type: :rescaler,\n          child: %{ type: :input_stream, input_id: :input_1 },\n        },\n        %{\n          type: :rescaler,\n          child: %{ type: :input_stream, input_id: :input_2 },\n        }\n      ]\n    }\n  }\n  {[notify_child: {:live_compositor, request}], state}\nend\n'})})})]}),"\n",(0,s.jsxs)(n.p,{children:["By default, a ",(0,s.jsx)(n.code,{children:"View"})," component positions its children next to each other in a row. Each child without a defined width or\nheight fills available space inside the parent component. To place them in a column, set a ",(0,s.jsx)(n.code,{children:'direction: "column"'})," option."]}),"\n",(0,s.jsx)(n.p,{children:"In an example below we can see that:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"View"})," has 2 children components with unspecified dimensions, so they will divide available width exactly in half."]}),"\n",(0,s.jsxs)(n.li,{children:["Each ",(0,s.jsx)(n.code,{children:"Rescaler"})," component has a size ",(0,s.jsx)(n.code,{children:"640x720"})," (half of ",(0,s.jsx)(n.code,{children:"1280x720"}),"), but it needs to fit an input stream with ",(0,s.jsx)(n.code,{children:"16:9"})," aspect ratio."]}),"\n"]}),"\n",(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("img",{src:d,style:{width:600}}),(0,s.jsx)(n.p,{children:"Output stream"})]}),"\n",(0,s.jsx)(n.h2,{id:"place-one-of-the-inputs-in-the-top-right-corner",children:"Place one of the inputs in the top right corner"}),"\n",(0,s.jsxs)(n.p,{children:["Specify ",(0,s.jsx)(n.code,{children:"width"})," and ",(0,s.jsx)(n.code,{children:"height"})," of one of the ",(0,s.jsx)(n.code,{children:"Rescaler"})," components and position it using ",(0,s.jsx)(n.code,{children:"top"}),"/",(0,s.jsx)(n.code,{children:"right"})," options in the corner."]}),"\n",(0,s.jsxs)(r.Z,{queryString:"lang",children:[(0,s.jsx)(o.Z,{value:"http",label:"HTTP",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'POST: /api/output/output_1/update\nContent-Type: application/json\n\n{\n  "video": {\n    "root": {\n      "type": "view",\n      "background_color_rgba": "#4d4d4dff",\n      "children": [\n        {\n          "type": "rescaler",\n          "child": { "type": "input_stream", "input_id": "input_1" },\n        },\n        {\n          "type": "rescaler",\n          "width": 320,\n          "height": 180,\n          "top": 20,\n          "right": 20,\n          "child": { "type": "input_stream", "input_id": "input_2" },\n        }\n      ]\n    }\n  }\n}\n'})})}),(0,s.jsx)(o.Z,{value:"membrane",label:"Membrane Framework",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-elixir",children:'def handle_setup(ctx, state) do\n  request = %LiveCompositor.Request.UpdateVideoOutput{\n    output_id: "output_1",\n    root: %{\n      type: :view,\n      background_color_rgba: "#4d4d4dff",\n      children: [\n        %{\n          type: :rescaler,\n          child: %{ type: :input_stream, input_id: :input_1 },\n        },\n        %{\n          type: :rescaler,\n          width: 320,\n          height: 180,\n          top: 20,\n          right: 20,\n          child: %{ type: :input_stream, input_id: :input_2 },\n        }\n      ]\n    }\n  }\n  {[notify_child: {:live_compositor, request}], state}\nend\n'})})})]}),"\n",(0,s.jsxs)(n.p,{children:["When you specify ",(0,s.jsx)(n.code,{children:"top"}),"/",(0,s.jsx)(n.code,{children:"right"})," options on the ",(0,s.jsx)(n.code,{children:"Rescaler"})," component, the ",(0,s.jsx)(n.code,{children:"View"})," component does not take that component\ninto account when calculating the row layout of its children. See ",(0,s.jsx)(n.a,{href:"/docs/api/components/View#absolute-positioning",children:"absolute positioning"})," to learn more."]}),"\n",(0,s.jsx)(n.p,{children:"As a result:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The first child extends to the full width of a parent."}),"\n",(0,s.jsx)(n.li,{children:"The second component takes the specified size, and it is positioned in the top-right corner (20px from border)."}),"\n"]}),"\n",(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("img",{src:u,style:{width:600}}),(0,s.jsx)(n.p,{children:"Output stream"})]})]})}function x(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(b,{...e})}):b(e)}},5162:(e,n,t)=>{t.d(n,{Z:()=>o});t(7294);var s=t(6905);const i={tabItem:"tabItem_Ymn6"};var r=t(5893);function o(e){let{children:n,hidden:t,className:o}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,s.Z)(i.tabItem,o),hidden:t,children:n})}},4866:(e,n,t)=>{t.d(n,{Z:()=>k});var s=t(7294),i=t(6905),r=t(2466),o=t(6550),a=t(469),c=t(1980),l=t(7392),d=t(12);function u(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:s,default:i}}=e;return{value:n,label:t,attributes:s,default:i}}))}(t);return function(e){const n=(0,l.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const i=(0,o.k6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,c._X)(r),(0,s.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(i.location.search);n.set(r,e),i.replace({...i.location,search:n.toString()})}),[r,i])]}function y(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,r=p(e),[o,c]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=t.find((e=>e.default))??t[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:r}))),[l,u]=m({queryString:t,groupId:i}),[y,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,r]=(0,d.Nk)(t);return[i,(0,s.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:i}),b=(()=>{const e=l??y;return h({value:e,tabValues:r})?e:null})();(0,a.Z)((()=>{b&&c(b)}),[b]);return{selectedValue:o,selectValue:(0,s.useCallback)((e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),f(e)}),[u,f,r]),tabValues:r}}var f=t(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(5893);function v(e){let{className:n,block:t,selectedValue:s,selectValue:o,tabValues:a}=e;const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,r.o5)(),d=e=>{const n=e.currentTarget,t=c.indexOf(n),i=a[t].value;i!==s&&(l(n),o(i))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":t},n),children:a.map((e=>{let{value:n,label:t,attributes:r}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>c.push(e),onKeyDown:u,onClick:d,...r,className:(0,i.Z)("tabs__item",b.tabItem,r?.className,{"tabs__item--active":s===n}),children:t??n},n)}))})}function g(e){let{lazy:n,children:t,selectedValue:i}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===i));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function j(e){const n=y(e);return(0,x.jsxs)("div",{className:(0,i.Z)("tabs-container",b.tabList),children:[(0,x.jsx)(v,{...e,...n}),(0,x.jsx)(g,{...e,...n})]})}function k(e){const n=(0,f.Z)();return(0,x.jsx)(j,{...e,children:u(e.children)},String(n))}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>o});var s=t(7294);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);