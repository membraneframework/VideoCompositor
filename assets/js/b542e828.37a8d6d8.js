"use strict";(self.webpackChunkcompositor_live=self.webpackChunkcompositor_live||[]).push([[935],{5237:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>d,toc:()=>a});var r=n(5893),s=n(1151);const i={description:"API routes to configure the compositor."},o="Routes",d={id:"api/routes",title:"Routes",description:"API routes to configure the compositor.",source:"@site/pages/api/routes.md",sourceDirName:"api",slug:"/api/routes",permalink:"/docs/api/routes",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{description:"API routes to configure the compositor."},sidebar:"sidebar",previous:{title:"API Reference",permalink:"/docs/category/api-reference"},next:{title:"InputStream",permalink:"/docs/api/components/InputStream"}},c={},a=[{value:"Init",id:"init",level:3},{value:"Start",id:"start",level:3},{value:"Update scene",id:"update-scene",level:3},{value:"Register input stream",id:"register-input-stream",level:3},{value:"Register output stream",id:"register-output-stream",level:3},{value:"Register renderer",id:"register-renderer",level:3},{value:"Unregister request",id:"unregister-request",level:3}];function l(e){const t={a:"a",code:"code",h1:"h1",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"routes",children:"Routes"}),"\n",(0,r.jsx)(t.h3,{id:"init",children:"Init"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'type Init = {\n  type: "init";\n  web_renderer?: {\n    init?: boolean;\n    disable_gpu?: boolean;\n  };\n  framerate: number;\n  stream_fallback_timeout_ms?: number;\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"Init request triggers the initial setup of a compositor. It defines the base settings of a compositor that need to be evaluated before any other work happens."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"web_renderer"})," - Web renderer specific options. ",(0,r.jsx)(t.a,{href:"./renderers/web",children:"Learn more"}),".","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"web_renderer.init"})," - (",(0,r.jsxs)(t.strong,{children:["default=",(0,r.jsx)(t.code,{children:"true"})]}),"). Enable web rendering capabilities. With this option disabled, you can not use ",(0,r.jsxs)(t.a,{href:"./components/WebView",children:[(0,r.jsx)(t.code,{children:"WebView"})," components"]})," or register ",(0,r.jsxs)(t.a,{href:"./renderers/web",children:[(0,r.jsx)(t.code,{children:"WebRenderer"})," instances"]}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"web_renderer.disable_gpu"})," - (",(0,r.jsxs)(t.strong,{children:["default=",(0,r.jsx)(t.code,{children:"false"})]}),"). Disable GPU support inside embedded Chromium instance."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"framerate"})," - Target framerate of the output streams."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"stream_fallback_timeout_ms"})," (",(0,r.jsx)(t.strong,{children:"default: 1000"}),") - Timeout that defines when the compositor should switch to fallback on the input stream that stopped sending frames."]}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"start",children:"Start"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'type Start = {\n  type: "start";\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"Starts the processing pipeline. If outputs are registered and defined in the scene then the compositor will start to send the RTP stream."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"update-scene",children:"Update scene"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'type UpdateScene = {\n  type: "update_scene";\n  outputs: OutputScene[];\n}\n\ntype OutputScene = {\n    output_id: string;\n    root: Component;\n}\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"outputs"})," - List of outputs. Identifies what should be rendered for each RTP output streams.","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"outputs[].output_id"})," - Id of an already registered output stream. See ",(0,r.jsx)(t.a,{href:"./routes#register-output-stream",children:(0,r.jsx)(t.code,{children:"RegisterOutputStream"})}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"outputs[].root"})," - Root of a component tree that should be rendered for the output. ",(0,r.jsx)(t.a,{href:"../concept/component",children:"Learn more"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"register-input-stream",children:"Register input stream"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'type RegisterInputStream = {\n  type: "register";\n  entity_type: "input_stream";\n  input_id: string;\n  port: u16 | string;\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"Register a new RTP input stream."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"input_id"})," - An identifier for the input stream. It can be used in the ",(0,r.jsx)(t.a,{href:"./components/InputStream",children:(0,r.jsx)(t.code,{children:"InputStream"})})," component to render the stream content."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"port"})," - UDP port or port range on which the compositor should listen for the stream. An integer value between 1 and 65535 that represents a specific port\nor string in the ",(0,r.jsx)(t.code,{children:"START:END"})," format for a port range."]}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"register-output-stream",children:"Register output stream"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'type RegisterOutputStream = {\n  type: "register";\n  entity_type: "output_stream";\n  output_id: string;\n  port: u16;\n  ip: string;\n  resolution: {\n    width: number;\n    height: number;\n  };\n  encoder_settings: {\n    preset: EncoderPreset;\n  };\n}\n\ntype EncoderPreset =\n  | "ultrafast"\n  | "superfast"\n  | "veryfast"\n  | "faster"\n  | "fast"\n  | "medium"\n  | "slow"\n  | "slower"\n  | "veryslow"\n  | "placebo"\n'})}),"\n",(0,r.jsx)(t.p,{children:"Register a new RTP output stream."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"output_id"})," - An identifier for the output stream. It can be used in the ",(0,r.jsx)(t.code,{children:"UpdateScene"})," request to define what to render for the output stream."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"port"})," / ",(0,r.jsx)(t.code,{children:"ip"})," - UDP port and IP where compositor should send the stream."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"resolution"})," - Output resolution in pixels."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"encoder_settings.preset"})," - Preset for an encoder. See ",(0,r.jsx)(t.code,{children:"FFmpeg"})," ",(0,r.jsx)(t.a,{href:"https://trac.ffmpeg.org/wiki/Encode/H.264#Preset",children:"docs"})," to learn more."]}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"register-renderer",children:"Register renderer"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'type RegisterRenderer = {\n  type: "register";\n  entity_type: "shader" | "web_renderer" | "image";\n  ... // renderer specific options\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"See renderers documentation to learn more."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"./renderers/image",children:"Image"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"./renderers/shader",children:"Shader"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"./renderers/web",children:"WebRenderer"})}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"unregister-request",children:"Unregister request"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'type Unregister =\n  | { type: "unregister", entity_type: "input_stream", input_id: string }\n  | { type: "unregister", entity_type: "output_stream", output_id: string }\n  | { type: "unregister", entity_type: "shader", shader_id: string }\n  | { type: "unregister", entity_type: "image", image_id: string }\n  | { type: "unregister", entity_type: "web_renderer", instance_id: string }\n'})})]})}function p(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>d,a:()=>o});var r=n(7294);const s={},i=r.createContext(s);function o(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);